# 内存分配方式

###单一连续分配

- 定义：将内存划分为操作系统和用户内存两部分，用户内存同时只允许一个程序允许

### 固定分区分配

- 定义：提前将内存空间划分为多个固定大小的分区，每个分区可装入一道用户程序，需要建立一张分区说明表，用来说明区号，大小，起址，状态（是否分配）
- 支持多进程
- 缺点：有些程序过大，放不进去，内部碎片多，内存浪费大

### 动态分区分配

- 定义：程序运行的时候动态的建立分区，使之刚好够用，因此分区大小和分区个数都是可变的
- 缺点：分区之间存在碎片，造成内存浪费，而这个时候os会对这些碎片进行整理调整，使得这些碎片组成一片较大的连续的内存空间，供之后的程序使用，但是这样增加了系统的负载，并且会对正在运行的程序产生干扰
- 实现过程：
  1. os需要维护两张分区表，**已分配分区表**和**自由分区表**
  2. 当新的程序进入内存的时候会去内存中找出一块比此程序需要的内存大的连续的内存空间，对此空间进行切割，使得它刚好能放下此程序。这个时候涉及到这几种算法：
     - 首次适应算法
     - 最佳适应算法
     - 最大适应算法
     - 邻近适应算法

### 离散分配

- 定义：可以将一个程序放置在不连续的内存空间内

- 实现：

  1. os将内存分割成多个page，每个page的大小为2**n，比较小，然后维护一张空闲page表
  2. 当程序进入内存的时候，os找到多个page，将它们分配给程序使用
  3. 每个进程维护一张逻辑page地址到物理page的页表，用来说明程序中的page与内存中page的映射关系

  但是这样会使得cpu在读取数据的时候需要先读取页表，获取到物理地址之后才能获取数据，减慢了cpu的运行速度，这时候就出现了快表（TLB），它硬件上就比内存快，高速缓冲存储器，页表内容将会缓存到它里面

- 缺点：存在页内碎片，但是比较小

- 发展：分段（方便编程序），段页式

--------



# 虚拟内存管理

- 原理：在内存中对磁盘中的数据进行管理，在需要的时候只能从磁盘中进行读取，但是用户使用起来和直接使用内存是一样的
- 页面置换算法：缺页率

# 文件管理

- 定义：指记录在外存上的具有文件名的一组相关信息的集合，系统运行时，以进程作为基本单元，用户输入输出时，以文件为基本单位，可分为有结构文件和无结构文件两种。有结构文件是由若干个相关记录组成，而无结构文件则被看成一个字符流。
- 有结构文件
  - 顺序文件，每条记录定长存放，读取的时候只需要知道开始地址+偏移量就可以直接读取
    - 优点：存取速度快（批量存取），尤其是大文件
    - 缺点：动态修改不方便
  - 索引文件：为了解决文件变长记录文件的顺序存取低效问题，建立索引表，包含索引、长度、指针
    - 优点：方便存取，较快的检索速度
    - 缺点：增加了存储开销，不好的查找策略对文件系统的效率影响很大

# 目录管理

- 文件控制块（FCB）
  - 定义：操作系统为管理文件而设置的数据结构，存放了文件的有关说明信息，是文件存在的标志
  - 包含：
    - 基本信息类：文件名，文件长度，类型，属性文件屋里信息
    - 存取控制信息类：文件存取权限、用户名、口令、共享计数
    - 使用信息类：文件的建立日期、最后修改日期、保存期限、最后访问日期
- 文件目录：把所有的FCB组织在一起，就构成了文件目录，即文件控制块的有序集合。
- 目录项：构成文件目录的项目，即FCB
- 文件目录：为了实现对文件目录的管理，通常将文件目录以文件的形式保存在外存，称为目录文件。
- 几种实现方式：
  - 单级目录
  - 二级目录
  - 树形目录

# 文件在磁盘中的存储

### 连续分配

- 优点：结构简单，容易实现
- 缺点：创建文件的时候需要给定文件大小，不利于文件动态扩充，空间利用不充分

### 链式分配

 